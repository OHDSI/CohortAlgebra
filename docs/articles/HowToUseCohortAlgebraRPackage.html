<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>How to Use CohortAlgebra R Package • CohortAlgebra</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="How to Use CohortAlgebra R Package">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">CohortAlgebra</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/HowToUseCohortAlgebraRPackage.html">How to Use CohortAlgebra R Package</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><a class="external-link nav-link" href="https://ohdsi.github.io/Hades"><img src='https://ohdsi.github.io/Hades/images/hadesMini.png' width=80 height=17 style='vertical-align: top;'></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/OHDSI/CohortAlgebra/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>How to Use CohortAlgebra R Package</h1>
                        <h4 data-toc-skip class="author">Gowtham A.
Rao</h4>
            
            <h4 data-toc-skip class="date">2025-02-22</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/OHDSI/CohortAlgebra/blob/HEAD/vignettes/HowToUseCohortAlgebraRPackage.Rmd" class="external-link"><code>vignettes/HowToUseCohortAlgebraRPackage.Rmd</code></a></small>
      <div class="d-none name"><code>HowToUseCohortAlgebraRPackage.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>(This package is NOT part of HADES.)</p>
<p>The idea behind this package is to allow the construction of new
cohorts from previously instantiated cohorts in the cohort table. All
cohorts in OHDSI have a standard definition: “A cohort is a set of
persons who satisfy one or more inclusion criteria for a duration of
time.”</p>
<ul>
<li>One person may belong to multiple cohorts</li>
<li>One person may belong to the same cohort for multiple different time
periods</li>
<li>One person may not belong to the same cohort multiple times during
the same period of time</li>
<li>A cohort may have zero or more members</li>
</ul>
<p>This is represented in a cohort table as cohort_definition_id,
subject_id, cohort_start_date and cohort_end_date. For more details
about the concept of a cohort please review <a href="https://github.com/OHDSI/TheBookOfOhdsi" class="external-link">The Book of
OHDSI</a>.</p>
<p>This package allows the creation of new cohorts from previously
instantiated cohort table using cohort algebra (similar to temporal set
algebra). The output is one or more new cohorts.</p>
<div class="section level3">
<h3 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h3>
<ul>
<li>This is an installable R-package that may be installed as
follows:</li>
</ul>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"OHDSI/CohortAlgebra"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="cohort-union">Cohort UNION<a class="anchor" aria-label="anchor" href="#cohort-union"></a>
</h3>
<ul>
<li>Given two or more cohorts, an UNION operator on these cohorts
creates a new cohort with continuous days the persons was present in any
of the cohorts. For example: given a cohort table as follows</li>
</ul>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cohort</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 3 × 4</span></span></span>
<span><span class="co">#&gt;   cohortDefinitionId subjectId cohortStartDate cohortEndDate</span></span>
<span><span class="co">#&gt;                <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>       </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>                  1         1 2022-01-01      2022-03-01   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>                  2         1 2022-02-10      2022-05-10   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span>                  2         1 2022-08-15      2022-12-30</span></span></code></pre>
<p>The union of the two cohorts is expected to give us</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cohortExpected</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 2 × 4</span></span></span>
<span><span class="co">#&gt;   cohortDefinitionId subjectId cohortStartDate cohortEndDate</span></span>
<span><span class="co">#&gt;                <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>       </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>                  3         1 2022-01-01      2022-05-10   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>                  3         1 2022-08-15      2022-12-30</span></span></code></pre>
<p><img src="CohortUnion.png" alt="Cohort Union"> To perform Cohort
Union, we use the unionCohorts function. This function requires as an
input a data.frame called oldToNewCohortId. Here we specify the cohort
id’s of the cohorts we want to union. The newCohortId is the cohortId of
the resultant cohort. The oldCohortId are cohorts that are already in
the cohort table.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">oldToNewCohortId</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span></span>
<span>    oldCohortId <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">2</span><span class="op">)</span>,</span>
<span>    newCohortId <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">3</span>, <span class="fl">3</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="fu">CohortAlgebra</span><span class="fu">::</span><span class="fu"><a href="../reference/unionCohorts.html">unionCohorts</a></span><span class="op">(</span></span>
<span>  connection <span class="op">=</span> <span class="va">connection</span>,</span>
<span>  sourceCohortDatabaseSchema <span class="op">=</span> <span class="va">cohortDatabaseSchema</span>,</span>
<span>  sourceCohortTable <span class="op">=</span> <span class="va">tableName</span>,</span>
<span>  targetCohortDatabaseSchema <span class="op">=</span> <span class="va">cohortDatabaseSchema</span>,</span>
<span>  targetCohortTable <span class="op">=</span> <span class="va">tableName</span>,</span>
<span>  oldToNewCohortId <span class="op">=</span> <span class="va">oldToNewCohortId</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Now we will have a new cohortId ‘3’ which is the union of cohortIds 1
and 2.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 2 × 4</span></span></span>
<span><span class="co">#&gt;   cohortDefinitionId subjectId cohortStartDate cohortEndDate</span></span>
<span><span class="co">#&gt;                <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>       </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>                  3         1 2022-01-01      2022-05-10   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>                  3         1 2022-08-15      2022-12-30</span></span></code></pre>
<p>Note: if the target cohort table had a cohort with cohortId = 3,
before running the union function - this would cause a conflict. In
those cases, the union function would not run. We can purge all records
for cohortId = 3 from the target cohort table. The parameter
purgeConflicts will delete any cohort records in the cohort table where
cohortId is the cohortId of the newCohort.</p>
</div>
<div class="section level3">
<h3 id="intersect-cohort">InterSect Cohort<a class="anchor" aria-label="anchor" href="#intersect-cohort"></a>
</h3>
<ul>
<li>Given two or more cohorts, an INTERSECT operator on these cohorts
creates a new cohort with continuous days the persons was present in ALL
of the cohorts.</li>
</ul>
<div class="section level4">
<h4 id="intersect-cohort-example-1">Intersect cohort example 1<a class="anchor" aria-label="anchor" href="#intersect-cohort-example-1"></a>
</h4>
<p>Input:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cohort</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 2 × 4</span></span></span>
<span><span class="co">#&gt;   cohortDefinitionId subjectId cohortStartDate cohortEndDate</span></span>
<span><span class="co">#&gt;                <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>       </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>                  1         1 2022-01-01      2022-01-15   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>                  2         1 2021-12-15      2022-01-30</span></span></code></pre>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">CohortAlgebra</span><span class="fu">::</span><span class="fu"><a href="../reference/intersectCohorts.html">intersectCohorts</a></span><span class="op">(</span></span>
<span>  connection <span class="op">=</span> <span class="va">connection</span>,</span>
<span>  sourceCohortDatabaseSchema <span class="op">=</span> <span class="va">cohortDatabaseSchema</span>,</span>
<span>  sourceCohortTable <span class="op">=</span> <span class="va">tableName</span>,</span>
<span>  targetCohortDatabaseSchema <span class="op">=</span> <span class="va">cohortDatabaseSchema</span>,</span>
<span>  targetCohortTable <span class="op">=</span> <span class="va">tableName</span>,</span>
<span>  cohortIds <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span>,</span>
<span>  newCohortId <span class="op">=</span> <span class="fl">3</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="float">
<img src="IntersectExample1.PNG" alt="Cohort Intersect 1"><div class="figcaption">Cohort Intersect 1</div>
</div>
<p>Output</p>
</div>
<div class="section level4">
<h4 id="intersect-cohort-example-2">Intersect cohort example 2<a class="anchor" aria-label="anchor" href="#intersect-cohort-example-2"></a>
</h4>
<p>Input:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cohort</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 3 × 4</span></span></span>
<span><span class="co">#&gt;   cohortDefinitionId subjectId cohortStartDate cohortEndDate</span></span>
<span><span class="co">#&gt;                <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>       </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>                  1         1 2022-01-01      2022-01-15   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>                  2         1 2021-12-15      2022-01-05   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span>                  2         1 2022-01-10      2022-01-30</span></span></code></pre>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">CohortAlgebra</span><span class="fu">::</span><span class="fu"><a href="../reference/intersectCohorts.html">intersectCohorts</a></span><span class="op">(</span></span>
<span>  connection <span class="op">=</span> <span class="va">connection</span>,</span>
<span>  sourceCohortDatabaseSchema <span class="op">=</span> <span class="va">cohortDatabaseSchema</span>,</span>
<span>  sourceCohortTable <span class="op">=</span> <span class="va">tableName</span>,</span>
<span>  targetCohortDatabaseSchema <span class="op">=</span> <span class="va">cohortDatabaseSchema</span>,</span>
<span>  targetCohortTable <span class="op">=</span> <span class="va">tableName</span>,</span>
<span>  cohortIds <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span>,</span>
<span>  newCohortId <span class="op">=</span> <span class="fl">3</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="float">
<img src="IntersectExample2.PNG" alt="Cohort Intersect 2"><div class="figcaption">Cohort Intersect 2</div>
</div>
<p>Output</p>
</div>
<div class="section level4">
<h4 id="intersect-cohort-example-3">Intersect cohort example 3<a class="anchor" aria-label="anchor" href="#intersect-cohort-example-3"></a>
</h4>
<p>Input:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cohort</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 3 × 4</span></span></span>
<span><span class="co">#&gt;   cohortDefinitionId subjectId cohortStartDate cohortEndDate</span></span>
<span><span class="co">#&gt;                <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>       </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>                  1         1 2022-01-01      2022-01-15   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>                  2         1 2021-12-15      2022-01-30   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span>                  3         1 2022-03-01      2022-03-15</span></span></code></pre>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">CohortAlgebra</span><span class="fu">::</span><span class="fu"><a href="../reference/intersectCohorts.html">intersectCohorts</a></span><span class="op">(</span></span>
<span>  connection <span class="op">=</span> <span class="va">connection</span>,</span>
<span>  sourceCohortDatabaseSchema <span class="op">=</span> <span class="va">cohortDatabaseSchema</span>,</span>
<span>  sourceCohortTable <span class="op">=</span> <span class="va">tableName</span>,</span>
<span>  targetCohortDatabaseSchema <span class="op">=</span> <span class="va">cohortDatabaseSchema</span>,</span>
<span>  targetCohortTable <span class="op">=</span> <span class="va">tableName</span>,</span>
<span>  cohortIds <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span>,</span>
<span>  newCohortId <span class="op">=</span> <span class="fl">4</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="float">
<img src="IntersectExample3.PNG" alt="Cohort Intersect 3"><div class="figcaption">Cohort Intersect 3</div>
</div>
<p>Output</p>
</div>
<div class="section level4">
<h4 id="intersect-cohort-example-4">Intersect cohort example 4<a class="anchor" aria-label="anchor" href="#intersect-cohort-example-4"></a>
</h4>
<p>Input:</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cohort</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 3 × 4</span></span></span>
<span><span class="co">#&gt;   cohortDefinitionId subjectId cohortStartDate cohortEndDate</span></span>
<span><span class="co">#&gt;                <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>       </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>                  1         1 2022-01-01      2022-01-15   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>                  2         1 2021-12-15      2022-01-30   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span>                  3         1 2022-03-01      2022-03-15</span></span></code></pre>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">CohortAlgebra</span><span class="fu">::</span><span class="fu"><a href="../reference/intersectCohorts.html">intersectCohorts</a></span><span class="op">(</span></span>
<span>  connection <span class="op">=</span> <span class="va">connection</span>,</span>
<span>  sourceCohortDatabaseSchema <span class="op">=</span> <span class="va">cohortDatabaseSchema</span>,</span>
<span>  sourceCohortTable <span class="op">=</span> <span class="va">tableName</span>,</span>
<span>  targetCohortDatabaseSchema <span class="op">=</span> <span class="va">cohortDatabaseSchema</span>,</span>
<span>  targetCohortTable <span class="op">=</span> <span class="va">tableName</span>,</span>
<span>  cohortIds <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span>,</span>
<span>  newCohortId <span class="op">=</span> <span class="fl">4</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="float">
<img src="IntersectExample4.PNG" alt="Cohort Intersect 4"><div class="figcaption">Cohort Intersect 4</div>
</div>
<p>Output</p>
</div>
<div class="section level4">
<h4 id="intersect-cohort-example-5">Intersect cohort example 5<a class="anchor" aria-label="anchor" href="#intersect-cohort-example-5"></a>
</h4>
<p>Input:</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cohort</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 2 × 4</span></span></span>
<span><span class="co">#&gt;   cohortDefinitionId subjectId cohortStartDate cohortEndDate</span></span>
<span><span class="co">#&gt;                <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>       </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>                  1         1 2022-01-01      2022-01-01   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>                  2         1 2022-01-01      2022-01-02</span></span></code></pre>
<div class="float">
<img src="IntersectExample5.PNG" alt="Cohort Intersect 5"><div class="figcaption">Cohort Intersect 5</div>
</div>
<p>Output</p>
</div>
</div>
<div class="section level3">
<h3 id="minus-cohort">Minus Cohort<a class="anchor" aria-label="anchor" href="#minus-cohort"></a>
</h3>
<p>Input:</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cohort</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 2 × 4</span></span></span>
<span><span class="co">#&gt;   cohortDefinitionId subjectId cohortStartDate cohortEndDate</span></span>
<span><span class="co">#&gt;                <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>       </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>                  1         1 2022-01-01      2022-03-01   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>                  2         1 2022-02-10      2022-05-10</span></span></code></pre>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">CohortAlgebra</span><span class="fu">::</span><span class="fu"><a href="../reference/minusCohorts.html">minusCohorts</a></span><span class="op">(</span></span>
<span>  connection <span class="op">=</span> <span class="va">connection</span>,</span>
<span>  sourceCohortDatabaseSchema <span class="op">=</span> <span class="va">cohortDatabaseSchema</span>,</span>
<span>  sourceCohortTable <span class="op">=</span> <span class="va">tableName</span>,</span>
<span>  targetCohortDatabaseSchema <span class="op">=</span> <span class="va">cohortDatabaseSchema</span>,</span>
<span>  targetCohortTable <span class="op">=</span> <span class="va">tableName</span>,</span>
<span>  firstCohortId <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  secondCohortId <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  newCohortId <span class="op">=</span> <span class="fl">3</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="float">
<img src="MinusExample1.PNG" alt="Cohort Minus"><div class="figcaption">Cohort Minus</div>
</div>
<p>Output for example 1</p>
<p>But if the cohorts are switched, i.e. minus cohort 1 from Cohort
2</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">CohortAlgebra</span><span class="fu">::</span><span class="fu"><a href="../reference/minusCohorts.html">minusCohorts</a></span><span class="op">(</span></span>
<span>  connection <span class="op">=</span> <span class="va">connection</span>,</span>
<span>  sourceCohortDatabaseSchema <span class="op">=</span> <span class="va">cohortDatabaseSchema</span>,</span>
<span>  sourceCohortTable <span class="op">=</span> <span class="va">tableName</span>,</span>
<span>  targetCohortDatabaseSchema <span class="op">=</span> <span class="va">cohortDatabaseSchema</span>,</span>
<span>  targetCohortTable <span class="op">=</span> <span class="va">tableName</span>,</span>
<span>  firstCohortId <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  secondCohortId <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  newCohortId <span class="op">=</span> <span class="fl">4</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="float">
<img src="MinusExample2.PNG" alt="Cohort Minus"><div class="figcaption">Cohort Minus</div>
</div>
<p>Output</p>
<p>Sequence of cohorts are important for minusCohort</p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Gowtham Rao.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
